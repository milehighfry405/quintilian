---

## ğŸ›  `assistant-memory-prompt-mvp.md`

### Smart Household Assistant â€” MVP Memory & Prompt Layer Spec

---

## ğŸ“‹ Status Key:

* âœ… - Completed/Tested/Working
* â³ - Pending/Not Yet Implemented
* ğŸ”„ - In Progress/Being Worked On
* âŒ - Failed/Needs Fixing
* ğŸ“ - Implementation Note/Technical Detail

---

## âœ… Goal:

Build the **Memory Layer + Prompt Builder** for the household assistant.
We're adding basic context-awareness so GPT can respond like it knows today's schedule & child info.
Wake word/audio flow is already working â€” this task focuses on backend logic.

---

## âœ… Scope:

* Use **local SQLite DB (MVP)** for context storage.
* Focus on **family profile & today's schedule** only.
* Build a **Prompt Builder function** that assembles context + user query into a GPT prompt.

---

## ğŸ—ƒ Database (simple for MVP):

### Table: `family_profile`

| Field       | Type | Example |
| ----------- | ---- | ------- |
| child_name | TEXT | "Emma"  |
| child_age  | REAL | 2.5     |

### Table: `daily_context`

| Field          | Type | Example                       |
| -------------- | ---- | ----------------------------- |
| activity_name | TEXT | "Nap"                         |
| start_time    | TEXT | "14:00"                       |
| end_time      | TEXT | "15:00"                       |
| status        | TEXT | scheduled, completed, delayed |

---

## âœ… Backend Flow:

1. Receive user query (simulate text input for now).
2. Query `family_profile` and `daily_context`.
3. Build structured GPT prompt with:

   * Child name & age.
   * Current & next scheduled activities.
   * Today's date.
   * User's query.
4. Send to GPT.
5. Return GPT response.

---

## âœ… Testing Flow (No wake word/audio needed):

* Build a simple **CLI test harness (run_test.py)**:

  * Input: text query (e.g., "What's next today?").
  * Output: constructed GPT prompt (print to console).
* This allows fast iteration on DB â†’ Prompt â†’ GPT flow.
* No need to trigger wake word/audio chain for testing.

---

## âœ… Test Cases:

1. Query: "What's next today?"

   * Prompt includes Emma's current & next activities.
   * âœ… TESTED: Successfully integrated with audio input
   * âœ… Context properly injected into system prompt
   * âœ… GPT responses reflect schedule awareness

2. Query: "Delay nap 30 min"

   * Update nap block in DB.
   * Confirm future prompts reflect change.
   * â³ PENDING: Schedule modification via voice

3. Query: "How has Emma done today?"

   * Inject completed activities (basic log optional).
   * â³ PENDING: Activity logging implementation

---

## âœ… Success Criteria:

* âœ… Prompts include correct context based on DB.
* â³ Changes via queries are reflected in future prompts.
* âœ… Fast local testing loop works without wake word chain.
* âœ… GPT replies feel situationally aware.
* âœ… Audio input successfully integrated with context
* âœ… Server properly handles context + audio transcription

---

## âœ… Deliverables:

* âœ… SQLite DB with `family_profile` & `daily_context`.
* âœ… Prompt Builder function.
* âœ… CLI script (`run_test.py`) for isolated testing.
* âœ… Basic test cases pass.
* âœ… Audio integration with context working

---

## ğŸ”„ Next Steps:

1. Implement schedule modification via voice commands
2. Add activity logging system
3. Enhance context awareness for more complex queries
4. Add error handling for context parsing
5. Implement context validation
6. Add context persistence between sessions

---

## ğŸ“ Implementation Notes:

* Server successfully handles both text and audio input with context
* Context is properly injected into system prompt
* Audio transcription works seamlessly with context
* Database queries are working as expected
* Need to implement schedule modification features
* Activity logging system needs to be built

